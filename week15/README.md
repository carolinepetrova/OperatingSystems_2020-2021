# Задачи върху системни примитиви за работа с файлове и процеси - част 1

## Преговор 

**Най-важно от системни примитиви за работа с файлове**

|   | open()  |  write() | read() | lseek() |  close() |
|---|---|---|---| ---|  ---|
|Какво прави|отваря файл|пише във файл|чете от файл| мести указателя във файла | затваряме файл |
|Аргументи|име на файл </br> флагове (O_WRONLY,O_RDONLY,O_RDWR, O_CREAT, O_TRUNC, O_APPEND)</br> режим (само ако създаваме файл)| файлов дескриптор </br> масив от символи </br> размер на това, което ще запишем| файлов дескриптор </br> масив, където ще запишем данните </br> размер на това, което ще запишем в масива | файлов дескриптор</br>отместване</br> флагове (SEEK_SET, SEEK_CUR,SEEK_END)| файлов дескриптор |
|Какво връща|номера на файловия дескриптор, асоцииран с файла </br> -1 иначе|реално записаните символи| реално прочетените символи | къде се намира указателя на файла| 0 при успех, -1 иначе|

**Най-важно от системни примитиви за работа с процеси**

|   | fork()  |  wait() | getpid() | getppid() |  exec() |
|---|---|---|---| ---|  ---|
| Какво прави  | създава процес дете  | блокира родителя докато не завърши някое от децата му  |връща pid-то на процеса, който го е извикал| връща pid-то на родителя на процеса, който го е извикал |сменяме образа на процес (примерно процес-дете вече няма да е копие на родителя си)|
| Какво връща  | 0 - в процеса-дете</br> pid на детето в процеса-родител</br> -1 иначе|  pid-то на завършилото дете; </br> -1 иначе  | pid-то на процеса </br> -1 иначе |pid-то на родителя на процеса </br> -1 иначе |при успех няма връщане; </br> -1 иначе |
| Допълнителни бележки  | - детето е копие на родителя си; </br> - детето наследява всичко от родителя си (променливи, файлови дескриптори тн.); </br> -родителят и детето се изпълняват асинхронно| за да вземем кода на завършване на детето подаваме променлива към wait, в която се записва резултата  | | |execv - подаваме масив от параметри </br> execl - изреждаме параметрите един по един </br> execvp, execlp - не е нужно да подаваме пълния път до командата, тя си я търси в директориите посочени в PATH системната променлива |

## Задачи
1. Да се напише програма на C, която реализира head f1 - извежда първите 10 реда от съдържанието на f1 на стандартния изход. </br>
2. Да се напише програма на С, която получава като параметър име на файл. Ако файлът не съществува се създава, а ако същестува се изтрива съдържанието му. Програмата чете редове от стандартния вход, заменя всяка цифра с * и записва реда във файла. </br>
3. Да се напише програма на С, която получава като параметър име на файл. Създава процес син, който записва стринга foobar във файла (ако не съществува, го създава, в противен случай изтрива съдържанието му), след което процеса родител прочита записаното във файла съдържание и го извежда на стандартния изход, добавяйки по един интервал между всеки два символа.
