# Команди за работа с файлове

**Лирическо отклонение ...**
### Логическо включване и изключване
За да се логнем до отдалечен сървър най-често се използва SSH (Secure Shell). Unix-базираните ОС могат да достъпят сървъра през терминала по следния начин: `ssh <user_name>@<host_ip>`. Windows user-ите могат да използват SSH клиент наречен [PuTTY](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html). 

Преди да започнем работа, трябва да се "логнем" към сървъра, което става, като напишем нашето потребителско име и парола (хората, които се логват през терминала трябва да напишат само парола). Ако сме се логнали успешно системата извежда т.нар prompt ($ в UNIX) и можем да започнем работа. След като приключим работа можем да използваме logout функцията, за да прекратим сесията ни.

### И тук можем да принтим

`echo "some nice string"`  - принтира на терминала текста в кавичките (неочаквано, нали?)

`echo -n "some nice string"` - прави същото, но не поставя нов ред (т.е. промп-та ще се залепи след това в кавичките)

## Работа с файлове и директории
**Почти всички команди днес са във формата command [one_or_multiple_files] [destination]**

1. `cat [файл/ове]` - показва съдържанието на файл/овете; без подадени файлове cat очаква вход от потребителя и го изписва на екрана след enter.
**ВАЖНО**: ако сме написали cat само без подадени файлове и искаме да спрем командата използваме Ctrl+C - така изпращаме сигнал до ядрото за терминиране на процеса.

    **Пример**: `cat file1 file2` - показва съдържанието на file1 и след това на file2

2. `touch [име_на_файл/ове]` - създава празни файлове

    **Пример**: `touch file1 file2` - създава празните файлове file1 и file2 в текущата директория

3. `tee [име_на_файл/ове]` - създава файлове и ни позволява да пишем в тях едновременно (т.е. съдържанието им накрая е едно и също)

    **Пример**: `tee file1 file2` - създава файловете file1 и file2 в текущата директория и очаква от нас вход. Като приключим с въвеждането приключваме процеса с Ctrl+C.

4. `cp [файл/ове] [дестинация]` - копира файлове

	`cp f1 f2 f3 ~/Desktop` - копира файловете f1 f2 f3 в директорията Desktop, която се намира в нашата начална потребителска директория

	Също така можем да го използваме да копираме съдържанието от един файл в друг:

	`cp f1 f2` - копираме съдържанието на f1 във f2

5. `mv [файл/ове] [дестинация]` - премества/преименува файлове

	**Пример**: `mv ./f1 ~/Desktop` - премества файла f1 от текущата директория в Desktop, която се намира в нашата начална потребителска директория
	
	**Пример**: `mv f1 f2` - преименува файла f1 на f2

6. `mkdir [име_на_директория/и]` - създава празни директории 

    **Пример**: `mkdir d1 d2` - създава празните директории d1 и d2 в текущата директория

7. `rmdir [име_на_директория/и]` - трие **само** празни директории

8. `rm [име_на_файл/ове]` - трие файлове

	`rm -i [файл/ове] ...` - пуска ни запитване дали искаме да изтрием файловете

	`rm -r [файл/ове и/или директории] ..` - рекурсивно триене, чрез него можем да изтрием непразна директория
	
	**ВАЖНО**: Използвайте `-r` с внимание, особено, когато е в комбинация с `-f`

### FYI

 1. Ако искате да копирате/премествате цялата директория използвате опция `-r`
    (recursive)
 2. За да копирате нещо от сървър до компютъра ви ползвате scp (secure copy):
	 `scp <user_name>@<server_ip>:<path_to_file> /some/local/directory`

3.  `mkdir -p dir1/dir2/dir3` - създава целия указан път, т.е. създава dir1, в нея създава dir2 и в dir2 създава dir3

## Търсене на файлове

`find` - командата без аргументи извежда на екрана абсолютно всички файлове (дори и тези в поддиректориите) на текущата директория, в която се намирате

Синтаксис: `find [директория] [аргументи]` 
		
Аргументи:

- `-name` - търси по име на файл
	
- `-type` - търси по тип на файл
	
- `-user` - търси по притежател на файла
		
- `-group` - търси по групата, притежател на файла
	
- `-size` - търси по размер на файла (трябва да специфицирате мерната единица) 
	
- `-exec` - изпълнява команда върху всеки един намерен резултат
			
	**Пример:**  `find / -name aa -exec wc -c {} \;` Тук ще намерим размера на всеки файл с разширение txt в цялата файлова директория.
	
    **Пример 2: МОЛЯ НЕ ГО ПРАВЕТЕ АКО ИЗРИЧНО НЕ ТРЯБВА ДА ТЪРСИТЕ В ЦЯЛАТА ФАЙЛОВА СИСТЕМА**
    
    `find / -name aa -exec cp {} ~/Desktop/folder \;`
    
	**Защо ни трябва {} \;** - find ще изпълни нашата команда и ще замести {} с намерените резултати, а **\;** гарантира, че командата ще се изпълни точно веднъж върху всеки един от резултатите.  


## Работа със съдържанието на файловете
1. `file [файл/ове]` - дава информация за типа на файла

2. `wc [файл/ове]` - брои:

	Опции:
	
	- `-l` - редове
	
	- `-c` - байтове

	- `-w` - думи 
	
	Ако не зададем опция командата изписва: бр. редове, бр. символи, бр. думи и името на файла
	
3. `head [-опции] [файл/ове]` - командата без аргументи по подразбиране дава първите 10 реда от указаните файлове

	Опции:
	- `-n` - така командата ни дава първите num реда от файловете

	- `-c`  - дава ни първите num байта от файла

4.	`tail [-опции] [файл/ове]` - без аргументи ни дава последните 10 реда от указаните файлове
	
	Опции:
	- `-n`- така командата ни дава последните num реда от файловете

	- `-c` - дава ни последните num байта от файла

    **FYI**: `-f` показва ни крайното съдържание на файла, но командата не приключва, а чака и изписва всички нови промени накрая на файла. 

5. `more f1` - ако имаме голям файл го показва екран по екран

	**FYI:** `less f1` - подобно на more, но докато more показва файла само отгоре-надолу, less ни позволява да се движим и в двете посоки. 

6.  `sort f1` - сортира f1 по редове лексикографски

7. `comm f1 f2` - сравнява два сортирани файла ред по ред. Изходът е 3 колони - 1-ва колона е уникалните редове за f1, 2-ра е уникалните редове за f2, а третата е редове, които са еднакви в двата файла
8.  `diff f1 f2`  - сравнява два файла ред по ред. Дава ни кои редове и по какъв начин трябва да бъдат променени в единия файл, за да бъдат двата файла идентични. 

9. `cmp f1 f2` - сравнява 2 файла байт по байт 

	- ако файловете са еднакви то командата не връща нищо

	- ако файловете се различават, командата ни връща първата позиция, на която се различават
10. `cut [options] [files]` - реже части от всеки ред на файл
	
	Опции: 

	- `-c` - извлича специфично указани символи, примерно:
		
		`cut -c 1-3,8-10 f1` - показва ни първите 3 символа от всеки ред на файла, прескача до 8-мия и показва от 8-мия до 10-тия 
		
		`cut -c 1,5,7 f1` - показва ни 1-вия, 5-тия и 7-мия символ от всеки ред на файла f1

		**Важно** - на пръв поглед `-c` изглежда прави същото като `-b` (`-b` реже по байтове), но не е така, защото някои символи са повече от един байт. 

		Примерно "♣" e 3 байта. Ако имаме файл със съдържание "♣abc" `cut -c 1,4` ще ни даде "♣c", докато `cut -b 1,4` няма да успее да ни принтира "♣" .
	
	- `-f` - реже по номер на колона. Ако не е указан разделител реже по TAB
	
	- `-d` - указва по какъв разделител да се реже
	
		**Note:** `-f` и `-d` често се ползват заедно
		 
		 `cut -d ":" -f 1-3 f1` - ще ни покаже първите 3 колони от файла f1 

11. `tr [options] [SET1] [SET2]` - заменя или изтрива специфични символи в подаден низ, където SET1 е множеството от символи, които трябва да се заменят, SET2 е множеството, с което да заменим символите от SET1 в низа

	-  tr без опции прави точно гореспоменатото
	
	- `-c` - сменя всички символи в низа, които **не са** в SET1, с тези от SET2.
	
	- `-d` - изтрива всички срещания на символите от SET1
	
	- `-s` -  замества повтарящите се символи, изброени в SET1, само с един символ
		 
13. `grep str file` - търси низ/рег израз във файл. Като резултат командата връща редовете от файла, в които се съдържа низа/рег. израза

	`grep -v str file` - връща редовете, в които **не се** съдържа низа/рег. израз
	

## Задачи
1. Създайте файл f1 и напишете в него "abc". Създайте друг, празен файл, f2. Копирайте съдържанието на f1 във файл с име f3. Създайте директория dir1 и влезте в нея. Преместете f1, f2, f3 в директорията без да излизате от нея, като в същото време ги преименувате на ff1, ff2, ff3.

2. Потърсете в цялата файлова система дали има директории, с име dir.

3. Изведете на екрана размера на файла passwd.txt в байтове. 

4. Потърсете дали в passwd.txt има хора с името "Георги"

5. Изведете първите имена на всички студенти, записани във файла passwd.txt.

6. Изведете на екрана последните 5 реда на всички файлове, които са ваше притежание.
