# Информационни команди. Команди за многопотребителския режим, комуникация. Команди за работа с процеси.

## Информационни команди

- `ls [-опции] [път до директория]`

- `date` - дава системно време

- `cal` - Принтира календар
	- без аргументи принтира текущия месец
		
	- `cal [месец] [година]` - принтира месеца и годината, които сме задали
	
		Пример: `cal 02 2016`

- `du [-опции] [файл/директория] ` - показва дисково пространство, заето от файлове или директории.

	- без указан файл/директория показва заеманото дисково пространство на всички файлове, директории и поддиректории на текущата директория в която се намиране
	
	
	Опции:
	
	- `-a` показва информацията и за скритите файлове
	
	- `-h` показва размера в human readable format
	
	- `-s` показва **само** размера на подадената директория

- `df [oпции] [файл]` показва кратка информация за заеманото дисково пространство на файловата система 

	 - ако бъде специфициран файл то то се показва информация за файловата система, в която се намира той 
	 
	Опции:
	
	- `-h` показва размерите в human readable format
	
	- `-k`  показва размерите в килобайти
	
	- `-m`  показва размерите в мегабайти
	
	- `-h` показва размерите в гигабайти 

- `tty`  -  показва името на файла на терминала, свързан към стандартния вход. 

## Команди за многопотребителския режим
- `login`

- `su [username]` - сменяме потребителя или ставаме суперпотребител

- `chown [потребител] [файл/ове]` - смяна на собственик на файла

- `chgrp [група] [файл/ове] ` - смяна на групата на файла

- `chmod [режим] [файл/ове] ` -   промяна на правата за достъп до даден файл или директория
	
	Режимът може да е:
	
	- Зададен чрез число в 8-мична бройна система: 000-777. 

		**Пример:** chmod 777 f1

		**Как можем да изчислим всяка цифра?** 

		От първото упражнение знаем, че правата за достъп на файловете изглеждат така: 

		`drwxr-xr-x  2 user user 4096 окт  5  2018 directory` 
		
		` -rw-r--r--  1 user user  2243935 дек  8  2017 file`

		Като на първата позиция стои съответно индикатор дали това е директория (d) или файл (-). Следват 3 групи от 3 символа **r**ead, **w**rite, e**x**ecute, които указват правата за достъп съответно на текущия потребител, групата му и всички останали. Ако някое право е забранено съответно на мястото му присъства `-`. 

		За да получим 3-цифрения код за правата за достъп просто заместваме r,w,x с 1-ца, а `-` с 0. 

		**Примерно** `-rw-r--r--` е файл, който може да се чете и пише от текущия потребител и само да се чете от групата и всички останали. 
		След като заместим символите с 0 и 1 получаваме: `110 100 100`  и така след преобразуване в 8-мична бр. система получаваме `644`. 
	
	- Зададен чрез букви: следва следния синтаксис: [Кой] [Действие] [Какво]
		- Кой: **u**ser, **g**roup, **o**thers, **a**ll
			
		- Действие: 
		    - **+** добавя право
		    - **-** премахва право
		    - **=** сменя изцяло правата за достъп с тези, който стоят от дясната страна на равенството
			
		- Какво: **r**ead, **w**rite, e**x**ecute

		**Примери:**
		
		`chmod u=rw,og=r file.txt` - текущия потребител получава правото само да чете и да пише, а групата и всички останали само да четат
		
		`chmod a+wx script.sh` - всички получават право да пишат и изпълняват файла
		
		`chmod go+w file` - групата и всички останали получават право да пишат във file
		
		`chmod u+x,go-r file` - текущия потребител получава право за изпълнение на файла, а на потребителите в групата му и всички останали се отнема правото да четат този файл. 
		
### Комуникация между потребители
- `who` - показва информация за логнатите потребители
Първата колонка показва потребителското име. 

    Втората колонка показва терминала, на който е логнат потребителя.
    
    Третата колона дава ден и час на логина. 
    
    Евентуално има и четвърта колона, която показва IP-то, ако не сме локално логнати. 

	- `-u` дава повече информация за логнатите потребители -  ако потребителят е бил активен в последната 1 минута се появява . в предпоследната колонка, a иначе изписва преди колко време е работил последно. В последната колонка се показва процеса, с който е свързан логина ни.
	
    - `-T` във втората колонка, след името на потребителя, ако е разрешил получване на съобщения се появява + във втората колонка, иначе е -;
	
	- `-H` - дава хедърите на колонките

- `who am i` - същото като who, но показва информация само за текущия потребител

- `whoami` - показва името на потребителя, изпълнил командата

- `w` - показва информация за логнатите потребители и какво правят в момента

- `finger [потребител]`  - показва информация за даден потребител

	-  ако не е указано потребителско име показва информация за всички потребители

- `wall` - пишем съобщение до всички

- `mesg [y|n]` - разрешава/забранява получаването на съобщения от други потребители 

	- без аргументи, командата показва информация дали сме разрешили или забранили съобщения
	
	- `mesg y` - разрешава съобщения
	
	- `mesg n` - забранява съобщения  


- `write [user] [tty]` - пишем съобщение до даден user като можем да укажем и по кой терминал да му се прати, ако user-a е логнат в повече от един. Ако потребителя е забранил съобщенията си излиза грешка.  

## Команди за работа с процеси

- `ps` - показва всички процеси пуснати от терминала
    Опции:
    - `-x` - показва всички процеси (включително и тези, които нямат контролиращ терминал), които са ваша собственост
    
    - `-u [username]` - показва всички процеси на подадения потребител 

    - `-a` - показва процесите и на другите потребители заедно с тези на текущия

- `ps aux` - комбинация от горепосочените опции. Показва информация за абсолютно всички процеси на всички потребители

	**Каква информация виждаме?** 

	- USER - на кой потребител принадлежи процеса
	
	- PID - идентификационен номер на процеса
	
	- %CPU - използваното време на процесора, разделено на времето, в което е стартиран процесът.

	 - %MEM  - процент на реалната памет, използвана от процеса.

	- VSZ   - използване на виртуална памет за целия процес (в KiB)
	
	- RSS - незаменяемата физическа памет, която е използвана в задачата (в KiB)

	- TTY  - контролиращ терминал
	
	- STAT - кодът на състоянието на процеса, който може да бъде Z (зомби), S (спящ), R (работещ) и т.н.
	
	- START  - начално време на процеса
	
	- TIME - количество време на процесора, изразходвано за изпълнение на процеса

	- COMMAND - името на изпълнената команда с нейните опции 

- `kill [опции] [pid на процес] ` - изпраща сигнал на процес
	
	**Какво е сигнал?** 

	Сигналите са предупреждения за важни събития, изпращани към процесите от ядрото или от друг процес. Те прекъсват дейността на процеса и го принуждават да ги обработи веднага.  Всички сигнали могат да бъдат изведени чрез `kill -l`

	**По-важни сигнали:**

	- SIGHUP  с номер 1 -  изпраща се от ядрото при отписване на потребителя. 

	- SIGINT с номер 2  - прекъсване. Изпраща се от ядрото при въвеждане  **Ctrl+C**  на терминала.

	- SIGKILL с номер  9 - принуждава процеса да завърши без да му се дава възможност за нормална завършваща дейност.
	
	- SIGTERM с номер 15  - заявка за нормално приключване на процеса.

	- TSTP с номер 18 - временно прекратява действието на процеса. Изпраща се от ядрото при въвеждане  **Ctrl+Z**  на терминала.

	**kill без посочен сигнал по default изпраща SIGTERM.**

	**Пример:** 
	
	`kill -9 1234` - убиваме (безмилостно) процес с pid 1234
	
	**We all love memes:** [FUN 1](https://i.imgur.com/6u3dd.png); [FUN 2](https://i.redd.it/1meun32avtj11.jpg); [BE GOOD PEOPLE](https://linuxhandbook.com/content/images/2020/06/dont-sigkill.jpeg)
 		
		
## Задачи
1. Създайте 3 празни файла в текущата директория. Създайте директория dir и преместете туко-що създадените файлове в нея. Влезте в директорията и направете тези файлове достъпни за писане от всички. Без да излизате директорията dir променете правата й, така че групата и всички останали да нямат никакви права върху нея. 

1.1 Върху файловете f1 f2 и f3 променете правата към следното (използвайки 8-мична бройна система):
f1 да стане само за четене от текущия потребител и всички останали (групата да няма никакви права)
f2 да стане за четене и писане от текущия потребител и групата
f3 да може да се чете, пише и изпълнява от тек. потребител, само да се чете и изпълнява от групата и само да се изпълнява от всички останали.

2. Изпълнете `tail -f passwd.txt &`. След това намерете PID на процеса. След като намерите процеса го убийте (вие решавате дали да сте милостиви или груби). 
